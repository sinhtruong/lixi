<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
      <meta name="mobile-web-app-capable" content="yes">
      <meta name="format-detection" content="telephone=no">
      <title>V√≤ng quay l√¨ x√¨</title>
      <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Francois+One&amp;display=swap'>
      <link rel='stylesheet' href='css/sweetalert.css'>
      <link rel='stylesheet' href='css/custom.css'>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
      <script type="text/javascript" src="js/Winwheel.min.js"></script>
      <script src='js/sweetalert-dev.js'></script>
      <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
      <style>
         /* T·ªëi ∆∞u th√™m cho canvas tr√™n iOS */
         #canvas {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
         }
      </style>
   </head>
<div class="pyro">
  <div class="before" style="z-index: 9999"></div>
  <div class="after"></div>
</div>
   <body onload="">
      <div class="new-year-container">
         

         <div class="banner top-banner">
            CH√öC M·ª™NG
         </div>

         <div class="year-display">
            <span class="year-part1">20</span><span class="year-part2">26</span>
         </div>

         <div class="banner bottom-banner">
            V√íNG QUAY L√å X√å
         </div>
      </div>

      <div id="caidat">
      <img id="popup"src="img/popup.jpg"/>
      <div class="sotiendalixi" id="sotiendalixi"></div>
      <div class="lichsulixi" id="lichsulixi"></div>
      <div class="buttontatpopup" onClick="tatpopup()" ></div>
      <div class="buttonlammoi" id="lammoi" onClick="lammoi()"></div>
      <div class="nenpopup"></div>
      </div>

      <div id="popupnhantien">
      <img id="popuptien"src="img/popupnhantien.png"/>
      <div class="sotienpopupnhantien" id="sotienpopupnhantien"><img id="xuatsotienpopup"></img></div>
      <div class="lammoipopupnhantien" id="lammoi" onClick="lammoi()"></div>
      <div class="nenpopup"></div>
      </div>

      <div class="vongquay">
         <canvas id="canvas" width="450" height="450" data-responsiveMinWidth="180" data-responsiveScaleHeight="true" data-responsiveMargin="50" style="touch-action: none;">
         </canvas>
         <div id="batdauquay" class="nutbatdau"></div>
         <div onClick="startSpin();" class="nutquay" style="touch-action: manipulation;"></div>
      </div>

      <img class="responsive2" style="position:fixed;z-index:99;top:0px;right:0px" src="img/hea1.png"/>
      <div style="position:fixed;z-index:99;bottom:-50px;left:0;width:100%;height:500px;background:url(img/bot1.png) repeat-x bottom left;pointer-events:none;"></div>
      
      <div class="nutcaidat" style="position:fixed;bottom:0px;left:20px" onClick="mopopup()"></div>
      <input type="range" id="manhornhe" style="position:fixed;bottom:2px;right:20px;z-index: 999" onchange="laypower()" min="3" step="0.1" max="15" value="8">

      <img style="position:fixed;z-index:99;top:2px;left:1px" src="img/banglixi.png"/>
      <div id="annhantien" style="display: none;">
      <img class="buttonnhantien" style="position:fixed;z-index:99;top:153px;left:1px;cursor: pointer;" src="img/nhantien.png" onclick="nhantien()" />
      <img style="position:fixed;z-index:99;top:183px;left:24px;" src="img/muiten.gif"/>
      </div>

      <div style="position:fixed;z-index:999;top:37px;left:40px;text-shadow: 2px 2px 5px #f7ff29;color: #f2f4be;" id="xuatluotquay"></div>

      <img style="position:fixed;z-index:999;top:105px;left:9px" id="xuatsotien"></img>

      <audio id="votay"><source src="sound/votay.mp3" type="audio/mpeg"></audio>
      <audio id="matluot"><source src="sound/matluot.mp3" type="audio/mpeg"></audio>
      <audio id="dangquay"><source src="sound/dangquay.mp3" type="audio/mpeg"></audio>

   </body>
   <script>
    var matkhau = "mycode";
    var solanquay = 5;
      // Sau khi load trang s·∫Ω y√™u c·∫ßu nh·∫≠p m·∫≠t kh·∫©u
      // function nhappass() {
      //             swal({
      //             title: "V√≤ng quay b·ªã kho√°!",
      //             text: "Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü kho√° v√≤ng quay:",
      //             type: "input",
      //             showCancelButton: false, // C√≥ hi·ªÉn th·ªã n√∫t cancel kh√¥ng(true = c√≥)
      //             closeOnConfirm: false, // C√≥ th·ªÉ t·∫Øt popup khi nh·∫•p Ok kh√¥ng (true = c√≥)
      //             showLoaderOnConfirm: true, // Hi·ªÉn th·ªã loading khi nh·∫•p v√†o n√∫t Ok
      //             animation: "slide-from-top", // Nh∆∞ t√™n c·ªßa n√≥, popup s·∫Ω slide from top
      //             inputPlaceholder: "Nh·∫≠p m·∫≠t kh·∫©u..."
      //         },
      //         function(inputValue) {
      //             if (inputValue === false) return false;

      //             if (inputValue !== matkhau) {
      //                 setTimeout(function() {
      //                     swal.showInputError("M·∫≠t kh·∫©u sai, vui l√≤ng nh·∫≠p l·∫°i!");
      //                 }, 2000);
      //                 return false
      //             }
      //             setTimeout(function() {
      //                 swal("M·ªü kho√° th√†nh c√¥ng!", "H√£y ƒë∆∞a chi·∫øc ƒëi·ªán tho·∫°i cho ng∆∞·ªùi mu·ªën nh·∫≠n l√¨ x√¨ n√†o!", "success");
      //             }, 2000);
      //         });
      // }
      function mopopup() {
        document.getElementById("caidat").style.display = "block";
      }

      function tatpopup() {
        document.getElementById("caidat").style.display = "none";
      }

      $( ".buttontatpopup" ).hover(
        function() {
          $("#popup").attr("src",'img/popup2.jpg');
        }, function() {
          $("#popup").attr("src",'img/popup.jpg');
        }
      );
      $( ".buttonlammoi" ).hover(
        function() {
          $("#popup").attr("src",'img/popup1.png');
        }, function() {
          $("#popup").attr("src",'img/popup.jpg');
        }
      );
      $( ".buttonnhantien" ).hover(
        function() {
          $(".buttonnhantien").attr("src",'img/nhantienhover.png');
        }, function() {
          $(".buttonnhantien").attr("src",'img/nhantien.png');
        }
      );
      $( ".lammoipopupnhantien" ).hover(
        function() {
          $("#popuptien").attr("src",'img/popupnhantienhover.png');
        }, function() {
          $("#popuptien").attr("src",'img/popupnhantien.png');
        }
      );
      // T·ªëi ∆∞u GSAP cho iOS - T·∫Øt lag smoothing ƒë·ªÉ animation m∆∞·ª£t h∆°n
      gsap.ticker.lagSmoothing(0);
      
      // ====== C·∫§U H√åNH X√ÅC SU·∫§T ·∫®N ======
      // X√°c su·∫•t th·ª±c t·∫ø c·ªßa t·ª´ng m·ªánh gi√° (t·ªïng ph·∫£i = 100)
      // ‚ö†Ô∏è QUAN TR·ªåNG: index ph·∫£i kh·ªõp v·ªõi th·ª© t·ª± trong theWheel.segments array
      // Pattern xen k·∫Ω: L·ªõn (ƒë·ªè) - Nh·ªè (v√†ng) - L·ªõn (ƒë·ªè) - Nh·ªè (v√†ng)...
      const prizeConfig = [
          { text: '500.000 VNƒê', probability: 0, index: 0 },    // Index 0 - L·ªõn (ƒë·ªè) - DISABLED
          { text: '50.000 VNƒê', probability: 15, index: 1 },    // Index 1 - Nh·ªè (v√†ng)
          { text: '200.000 VNƒê', probability: 0, index: 2 },   // Index 2 - L·ªõn (ƒë·ªè)
          { text: '20.000 VNƒê', probability: 50, index: 3 },    // Index 3 - Nh·ªè (v√†ng)
          { text: '100.000 VNƒê', probability: 0, index: 4 },   // Index 4 - L·ªõn (ƒë·ªè)
          { text: '10.000 VNƒê', probability: 35, index: 5 }     // Index 5 - Nh·ªè (v√†ng)
      ];
      
      // H√†m ch·ªçn segment d·ª±a tr√™n x√°c su·∫•t
      function getRandomSegmentByProbability() {
          const random = Math.random() * 100; // 0-100
          let cumulative = 0;
          
          // L·ªçc ra c√°c segment c√≥ x√°c su·∫•t > 0
          const validPrizes = prizeConfig.filter(p => p.probability > 0);
          
          for (let i = 0; i < validPrizes.length; i++) {
              cumulative += validPrizes[i].probability;
              if (random <= cumulative) {
                  const prize = validPrizes[i];
                  console.log('Random:', random.toFixed(2), '‚Üí Tr√∫ng:', prize.text, '| Index:', prize.index);
                  return prize.index; // ‚úÖ Tr·∫£ v·ªÅ index thay v√¨ segment
              }
          }
          
          // Fallback: tr·∫£ v·ªÅ index ƒë·∫ßu ti√™n c√≥ x√°c su·∫•t > 0
          console.log('Fallback to first valid prize');
          return validPrizes[0].index;
      }
      
      // ====== THI·∫æT L·∫¨P V√íNG QUAY (C√°c √¥ ƒë·ªÅu nhau) ======
      // Pattern xen k·∫Ω: L·ªõn (ƒë·ªè) - Nh·ªè (v√†ng) - L·ªõn (ƒë·ªè) - Nh·ªè (v√†ng)...
      let theWheel = new Winwheel({
          'outerRadius': 220, // B√°n k√≠nh ngo√†i
          'innerRadius': 0, // Size l·ªó trung t√¢m
          'textFontSize': 20, // Size ch·ªØ ƒë·ªìng nh·∫•t
          'textOrientation': 'horizontal', // Ch·ªØ n·∫±m ngang
          'textAlignment': 'outer', // CƒÉn ch·ªânh vƒÉn b·∫£n ra b√™n ngo√†i b√°nh xe.
          'numSegments': 6, // S·ªë √¥
          'responsive': true,
          'segments': [{
              'fillStyle': '#910f06', // ƒê·ªè - L·ªõn
              'text': '500.000 VNƒê',
              'textFillStyle': '#ffffff'
          }, {
              'fillStyle': '#ab6f03', // V√†ng - Nh·ªè
              'text': '50.000 VNƒê',
              'textFillStyle': '#ffffff'
          }, {
              'fillStyle': '#910f06', // ƒê·ªè - L·ªõn
              'text': '200.000 VNƒê',
              'textFillStyle': '#ffffff'
          }, {
              'fillStyle': '#ab6f03', // V√†ng - Nh·ªè
              'text': '20.000 VNƒê',
              'textFillStyle': '#ffffff'
          }, {
              'fillStyle': '#910f06', // ƒê·ªè - L·ªõn
              'text': '100.000 VNƒê',
              'textFillStyle': '#ffffff'
          }, {
              'fillStyle': '#ab6f03', // V√†ng - Nh·ªè
              'text': '10.000 VNƒê',
              'textFillStyle': '#ffffff'
          }],
          'animation': // Ch·ªâ ƒë·ªãnh h√¨nh ƒë·ªông ƒë·ªÉ s·ª≠ d·ª•ng.
          {
              'type': 'spinToStop',
              'duration': 5, // Duration m·∫∑c ƒë·ªãnh, s·∫Ω ƒëi·ªÅu ch·ªânh theo device
              'spins': 8, // S·ªë v√≤ng m·∫∑c ƒë·ªãnh, s·∫Ω ƒëi·ªÅu ch·ªânh theo device
              'callbackFinished': alertPrize,
              'callbackSound': playSound, // Ch·ª©c nƒÉng g·ªçi khi √¢m thanh ƒë√°nh d·∫•u ƒë∆∞·ª£c k√≠ch ho·∫°t.
              'soundTrigger': 'pin', // Ch·ªâ ƒë·ªãnh c√°c ch√¢n l√† ƒë·ªÉ k√≠ch ho·∫°t √¢m thanh, t√πy ch·ªçn kh√°c l√† 'ph√¢n ƒëo·∫°n'.
              'easing': 'power3.out', // S·ª≠ d·ª•ng power3 thay v√¨ power4 cho m∆∞·ª£t h∆°n tr√™n mobile
          },
          'pins': {
              'number': 6, // S·ªë l∆∞·ª£ng ch√¢n. H·ªç kh√¥ng gian ƒë·ªÅu xung quanh b√°nh xe.
              'responsive': true,
              'fillStyle': 'silver',
              'outerRadius': 4,
          }
      });

      // T·ªëi ∆∞u canvas context cho iOS
      const canvas = document.getElementById('canvas');
      if (canvas && canvas.getContext) {
          const ctx = canvas.getContext('2d', { 
              alpha: false, // T·∫Øt alpha channel n·∫øu kh√¥ng c·∫ßn
              desynchronized: true // T·ªëi ∆∞u rendering tr√™n iOS
          });
      }

      // Vars ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi m√£ trong trang n√†y ƒë·ªÉ th·ª±c hi·ªán c√°c ƒëi·ªÅu khi·ªÉn ngu·ªìn.
      let wheelPower = 8;
      let wheelSpinning = false;
      let selectedPrizeText = ''; // ‚úÖ L∆∞u k·∫øt qu·∫£ ƒë∆∞·ª£c ch·ªçn theo x√°c su·∫•t
      // ---------------------------------------------------------------------
      // T·∫£i √¢m thanh ƒë√°nh d·∫•u v√† ch·ª©c nƒÉng ph√°t ƒë∆∞·ª£c g·ªçi khi pin ƒëi qua con tr·ªè.
      let audio = new Audio('sound/tick.mp3'); // T·∫°o ƒë·ªëi t∆∞·ª£ng √¢m thanh v√† t·∫£i t·∫≠p tin tick.mp3.

      var dem = 0;
      var demnhantien = 0; // ƒê·∫øm s·ªë l·∫ßn click v√†o n√∫t nh·∫≠n ti·ªÅn
      var lichsulixi = "";
      var tongtienlixi = 0;
      var tiendalixi;
      document.getElementById("xuatluotquay").innerHTML = dem; // ‚úÖ Hi·ªÉn th·ªã s·ªë l·∫ßn ƒë√£ quay (ban ƒë·∫ßu = 0)
      var votay = document.getElementById("votay");
      var matluot = document.getElementById("matluot");
      var dangquay = document.getElementById("dangquay");
      
      // Ph√°t hi·ªán mobile ƒë·ªÉ t·ªëi ∆∞u √¢m thanh
      const isMobileDevice = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

      function playSound() {
          // Tr√™n mobile, gi·∫£m t·∫ßn su·∫•t ph√°t √¢m thanh tick ƒë·ªÉ tr√°nh lag
          if (isMobileDevice) {
              // Ch·ªâ ph√°t √¢m thanh tick m·ªói 2 l·∫ßn ƒë·ªÉ gi·∫£m t·∫£i
              if (Math.random() > 0.5) return;
          }
          
          // D·ª´ng v√† tua l·∫°i √¢m thanh n·∫øu n√≥ ƒë√£ ph√°t.
          audio.pause();
          audio.currentTime = 0;

          // Ph√°t √¢m thanh.
          audio.play().catch(e => {
              // B·ªè qua l·ªói n·∫øu kh√¥ng th·ªÉ ph√°t √¢m thanh
              console.log('Audio play failed:', e);
          });
      }

      // -------------------------------------------------------
      // X·ª≠ l√Ω thanh range
      // -------------------------------------------------------
      function laypower() {
          wheelPower = document.getElementById("manhornhe").value; // L·∫•y d·ªØ li·ªáu thanh range
      }

      // -------------------------------------------------------
      // Sau khi nh·∫•p v√†o n√∫t quay
      // -------------------------------------------------------
      function startSpin() {
          // N√∫t quay kh√¥ng nh·∫•p ƒë∆∞·ª£c khi ƒëang ch·∫°y
          if (wheelSpinning == false) {
              // ‚ú® Reset g√≥c v·ªÅ 0 tr∆∞·ªõc khi quay (ƒë·ªÉ l·∫ßn quay sau v·∫´n ch√≠nh x√°c)
              theWheel.rotationAngle = 0;
              theWheel.draw();
              
              // Ph√°t hi·ªán mobile ƒë·ªÉ t·ªëi ∆∞u animation
              const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
              
              // ====== S·ª¨ D·ª§NG X√ÅC SU·∫§T ·∫®N ======
              // Ch·ªçn segment d·ª±a tr√™n x√°c su·∫•t ƒë√£ c·∫•u h√¨nh
              const wheelIndex = getRandomSegmentByProbability(); // Tr·∫£ v·ªÅ 0-5
              
              // ‚úÖ L∆∞u k·∫øt qu·∫£ v√†o bi·∫øn global ƒë·ªÉ d√πng trong alertPrize
              selectedPrizeText = prizeConfig[wheelIndex].text;
              console.log('Selected prize:', selectedPrizeText);
              
              // ‚úÖ Winwheel.segments l√† 1-indexed (segments[1] ƒë·∫øn segments[6])
              // C·∫ßn convert: index 0 ‚Üí segment 1, index 1 ‚Üí segment 2, ...
              const segmentNumber = wheelIndex + 1;
              console.log('Wheel will stop at segment:', segmentNumber, '(array index:', wheelIndex, ')');
              
              // D·ª±a tr√™n m·ª©c c√¥ng su·∫•t ƒë∆∞·ª£c ch·ªçn, h√£y ƒëi·ªÅu ch·ªânh s·ªë v√≤ng quay cho b√°nh xe
              if (isMobile) {
                  // Tr√™n mobile: TƒÉng s·ªë v√≤ng quay v√† th·ªùi gian
                  const spinsCount = Math.max(Math.min(wheelPower * 1.1, 12), 8); // T·ª´ 8-12 v√≤ng
                  theWheel.animation.spins = spinsCount;
                  theWheel.animation.duration = spinsCount * 0.7; // ~0.7s m·ªói v√≤ng = m∆∞·ª£t
              } else {
                  // Desktop: TƒÉng l√™n 10-15 v√≤ng
                  const spinsCount = Math.max(Math.min(wheelPower * 1.3, 15), 10);
                  theWheel.animation.spins = spinsCount;
                  theWheel.animation.duration = spinsCount * 0.65;
              }

              // T·∫Øt n√∫t xoay ƒë·ªÉ kh√¥ng th·ªÉ nh·∫•p l·∫°i trong khi b√°nh xe ƒëang quay.
              // $(".nutbatdau").css("background-image", "url(img/controtat.png)");

              // ‚úÖ SOLUTION: T·ª± l√†m animation b·∫±ng GSAP thay v√¨ d√πng Winwheel animation
              // V√¨ Winwheel's stopAngle calculation kh√¥ng r√µ r√†ng
              
              const segment = theWheel.segments[segmentNumber];
              
              // Mapping: g√≥c cu·ªëi c√πng ƒë·ªÉ indicate segment mong mu·ªën
              // ‚ú® ƒêi·ªÅu ch·ªânh: Range v·ª´a ph·∫£i - g√¢y h·ªìi h·ªôp nh∆∞ng kh√¥ng tranh c√£i
              const indicatedAngleRanges = {
                  1: {min: 310, max: 350},  // 500.000 VNƒê - ¬±20¬∞ (buffer 10¬∞ m·ªói b√™n)
                  2: {min: 250, max: 290},  // 50.000 VNƒê - ¬±20¬∞
                  3: {min: 190, max: 230},  // 200.000 VNƒê - ¬±20¬∞
                  4: {min: 130, max: 170},  // 20.000 VNƒê - ¬±20¬∞
                  5: {min: 70, max: 110},   // 100.000 VNƒê - ¬±20¬∞
                  6: {min: 10, max: 50}     // 10.000 VNƒê - ¬±20¬∞
              };
              
              const range = indicatedAngleRanges[segmentNumber];
              
              // Ch·ªçn g√≥c cu·ªëi c√πng ng·∫´u nhi√™n trong range
              let targetFinalAngle;
              if (segmentNumber === 1 && Math.random() > 0.5) {
                  targetFinalAngle = Math.random() > 0.5 ? 0 : (range.min + Math.random() * (range.max - range.min));
              } else {
                  targetFinalAngle = range.min + Math.random() * (range.max - range.min);
              }
              
              // ‚ö†Ô∏è FIX: T√≠nh s·ªë v√≤ng quay NGUY√äN, kh√¥ng d√πng s·ªë th·∫≠p ph√¢n
              const baseSpins = isMobile ? 8 : 10;
              const numSpins = baseSpins + Math.floor(Math.random() * 2); // 8-9 ho·∫∑c 10-11 v√≤ng
              const totalRotation = numSpins * 360 + targetFinalAngle;
              const duration = isMobile ? numSpins * 1.5 : numSpins * 1.3; // TƒÉng th·ªùi gian ƒë·ªÉ kh√∫c cu·ªëi ch·∫≠m h∆°n
              
              console.log(`üéØ Target: ${segment.text} (Seg ${segmentNumber}) | Final angle: ${targetFinalAngle.toFixed(2)}¬∞ | Total: ${totalRotation.toFixed(2)}¬∞ (${numSpins} spins) | Check: ${totalRotation % 360}`);
              
              // ‚ú® Animation m∆∞·ª£t m√†: Nhanh ‚Üí Ch·∫≠m d·∫ßn ƒë·ªÅu, kh√∫c cu·ªëi C·ª∞C ch·∫≠m
              wheelSpinning = true;
              dangquay.play();
              
              // D√πng expo.out: 
              // - Ban ƒë·∫ßu nhanh
              // - Ch·∫≠m l·∫°i d·∫ßn ƒë·ªÅu v√† m∆∞·ª£t m√†
              // - Kh√∫c cu·ªëi ch·∫≠m l·∫°i R·∫§T M·∫†NH ‚Üí h·ªìi h·ªôp t·ªôt ƒë·ªô!
              gsap.to(theWheel, {
                  rotationAngle: totalRotation,
                  duration: duration,
                  ease: "expo.out", // Kh√∫c cu·ªëi ch·∫≠m h∆°n nhi·ªÅu so v·ªõi circ.out
                  onUpdate: function() {
                      theWheel.draw();
                  },
                  onComplete: function() {
                      alertPrize(theWheel.getIndicatedSegment());
                  }
              });

              // ƒê·∫∑t th√†nh true ƒë·ªÉ kh√¥ng th·ªÉ thay ƒë·ªïi ngu·ªìn v√† b·∫≠t n√∫t quay l·∫°i trong khi
              // h√¨nh ·∫£nh ƒë·ªông hi·ªán t·∫°i. Ng∆∞·ªùi d√πng s·∫Ω ph·∫£i thi·∫øt l·∫≠p l·∫°i tr∆∞·ªõc khi quay l·∫°i.
              wheelSpinning = true;
          }
          // if (dem < solanquay) {
          dangquay.play();
          // }
      }

      // -------------------------------------------------------
      // Sau khi nh·∫•p v√†o n√∫t l√†m m·ªõi
      // -------------------------------------------------------
      // function lammoi() {
      //     swal({
      //             title: "L√†m m·ªõi v√≤ng quay!",
      //             text: "L√†m m·ªõi v√≤ng quay s·∫Ω xo√° h·∫øt c√°c v√≤ng quay c√≤n l·∫°i. \nL·ªãch s·ª≠ v√† t·ªïng ti·ªÅn l√¨ x√¨ v·∫´n gi·ªØ nguy√™n. \nCh√∫ √Ω n·∫øu t·∫£i l·∫°i trang s·∫Ω l√†m m·∫•t l·ªãch s·ª≠ v√† t·ªïng ti·ªÅn l√¨ x√¨\nNh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ti·∫øp t·ª•c:",
      //             type: "input",
      //             showCancelButton: true, // C√≥ hi·ªÉn th·ªã n√∫t cancel kh√¥ng(true = c√≥)
      //             closeOnConfirm: false, // C√≥ th·ªÉ t·∫Øt popup khi nh·∫•p Ok kh√¥ng (true = c√≥)
      //             showLoaderOnConfirm: true, // Hi·ªÉn th·ªã loading khi nh·∫•p v√†o n√∫t Ok
      //             animation: "slide-from-top", // Nh∆∞ t√™n c·ªßa n√≥, popup s·∫Ω slide from top
      //             inputPlaceholder: "Nh·∫≠p m·∫≠t kh·∫©u..."
      //         },
      //         function(inputValue) {
      //             if (inputValue === false) return false;

      //             if (inputValue !== matkhau) {
      //                 setTimeout(function() {
      //                     swal.showInputError("M·∫≠t kh·∫©u sai, vui l√≤ng nh·∫≠p l·∫°i!");
      //                 }, 2000);
      //                 return false
      //             }
      //             setTimeout(function() {
      //                 swal("L√†m m·ªõi th√†nh c√¥ng!", "H√£y ƒë∆∞a chi·∫øc ƒëi·ªán tho·∫°i cho ng∆∞·ªùi mu·ªën nh·∫≠n l√¨ x√¨ n√†o!", "success");

      //                 document.getElementById("popupnhantien").style.display = "none"; // T·∫Øt popup nh·∫≠n ti·ªÅn

      //                 theWheel.stopAnimation(false); // D·ª´ng h√¨nh ƒë·ªông
      //                 theWheel.rotationAngle = 0; // ƒê·∫∑t l·∫°i g√≥c b√°nh xe v·ªÅ 0 ƒë·ªô.
      //                 theWheel.draw(); // G·ªçi draw ƒë·ªÉ hi·ªÉn th·ªã c√°c thay ƒë·ªïi cho b√°nh xe.

      //                 $(".nutbatdau").css("background-image", "url(img/contro.png)"); // Hi·ªÉn th·ªã l·∫°i n√∫t Quay

      //                 document.getElementById("xuatluotquay").innerHTML = solanquay;

      //                 wheelSpinning = false; // ƒê·∫∑t l·∫°i th√†nh false th√†nh c√°c n√∫t ngu·ªìn v√† quay c√≥ th·ªÉ ƒë∆∞·ª£c b·∫•m l·∫°i.
      //                 document.getElementById("annhantien").style.display = "none"; // ·∫®n n√∫t nh·∫≠n ti·ªÅn
      //                 document.getElementById("xuatsotien").src =""; // Xo√° ·∫£nh ti·ªÅn

      //                 dem = 0;
      //             }, 2000);
      //         });
      // }

      // -------------------------------------------------------
      // Sau khi v√≤ng quay quay xong
      // -------------------------------------------------------
      function alertPrize(indicatedSegment) {
          dem++; // ‚úÖ ƒê·∫øm s·ªë l·∫ßn quay (tƒÉng sau m·ªói l·∫ßn quay xong)
          
          // L·∫•y k·∫øt qu·∫£ th·ª±c t·∫ø t·ª´ v·ªã tr√≠ wheel hi·ªán t·∫°i
          const actualIndicatedSegment = theWheel.getIndicatedSegment();
          const actualPrize = actualIndicatedSegment.text;
          
          console.log('‚úÖ Wheel stopped! Final angle:', theWheel.rotationAngle.toFixed(2), '| Prize:', actualPrize, '| Expected:', selectedPrizeText, '| Match:', actualPrize === selectedPrizeText ? '‚úÖ' : '‚ùå');
          
          wheelSpinning = false;

              $(".nutbatdau").css("background-image", "url(img/contro.png)"); // Hi·ªÉn th·ªã l·∫°i n√∫t Quay
              document.getElementById("xuatluotquay").innerHTML = dem; // ‚úÖ Hi·ªÉn th·ªã S·ªê L·∫¶N ƒê√É QUAY


              // if (indicatedSegment.text == '√î m·∫•t l∆∞·ª£t') { // N·∫øu quay v√†o 0k
              //     matluot.play(); // B·∫≠t nh·∫°c fail

              //     document.getElementById("annhantien").style.display = "none"; // ·∫®n n√∫t nh·∫≠n ti·ªÅn
              //     document.getElementById("xuatsotien").src = ""; // Xo√° ·∫£nh ti·ªÅn

              //     swal("R·∫•t ti·∫øc!", "B·∫°n kh√¥ng nh·∫≠n ƒë∆∞·ª£c ƒë·ªìng n√†o\nNh∆∞ng b·∫°n c√≤n l·∫°i " + (solanquay - dem) + " l·∫ßn quay, c·ªë g·∫Øng l√™n n√†o!", "error");
              // } else { // N·∫øu kh√¥ng quay v√†o 0k
              votay.play(); // B·∫≠t nh·∫°c v·ªó tay
              
              // Xu·∫•t ·∫£nh ti·ªÅn
              document.getElementById("annhantien").style.display = ""; // Hi·ªÉn th·ªã n√∫t nh·∫≠n ti·ªÅn
              document.getElementById("xuatsotien").src = "img/" + actualPrize.replace(".000 VNƒê", "") + "k.jpg";
              
              // ‚ú® Ph√¢n bi·ªát th√¥ng ƒëi·ªáp theo m√†u √¥
              // √î ƒë·ªè (gi√° tr·ªã l·ªõn): "T·∫øt ·∫•m no!"
              // √î v√†ng (gi√° tr·ªã nh·ªè): "T·∫øt vui v·∫ª!"
              const redPrizes = ['500.000 VNƒê', '200.000 VNƒê', '100.000 VNƒê'];
              const isRedPrize = redPrizes.includes(actualPrize);
              const title = isRedPrize ? "T·∫øt ·∫•m no!" : "T·∫øt vui v·∫ª!";
              
          // Hi·ªÉn th·ªã popup nhanh v·ªõi timer ng·∫Øn
          swal({
              title: title,
              text: "B·∫°n nh·∫≠n ƒë∆∞·ª£c " + actualPrize,
              type: "success",
              timer: 1500,
              showConfirmButton: true
          });
      }

      // -------------------------------------------------------
      // Sau khi nh·∫•p v√†o n√∫t nh·∫≠n ti·ªÅn
      // -------------------------------------------------------
      // function nhantien() {
      //   document.getElementById("annhantien").style.display = "none"; // ·∫®n n√∫t nh·∫≠n ti·ªÅn
      //   document.getElementById("popupnhantien").style.display = "block"; // M·ªü popup
      //   document.getElementById("xuatsotienpopup").src = "img/" + tiendalixi + "kk.jpg";
      //   demnhantien++;
      //   tongtienlixi += Number(tiendalixi);
      //   document.getElementById("sotiendalixi").innerHTML = tongtienlixi + ".000 VNƒê";
      //   lichsulixi += "Ng∆∞·ªùi " + demnhantien + " : " + tiendalixi + ".000 VNƒê<br/>";
      //   document.getElementById("lichsulixi").innerHTML = lichsulixi;
      // }

   </script>
</html>
